<!DOCTYPE html>
<html>
<head>
    <title>Preview Test</title>
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/preview.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div style="padding: 20px;">
        <h1>ðŸ§ª Preview Test</h1>
        <button onclick="testPreview()" style="padding: 10px 20px; margin: 10px;">Test Preview Display</button>
        <div id="testContainer"></div>
    </div>

    <script>
        async function testPreview() {
            const container = document.getElementById('testContainer');
            
            try {
                // Get sample data from backend
                const response = await fetch('http://localhost:8000/api/sample-design');
                const data = await response.json();
                
                if (data.success) {
                    // Create a preview container
                    container.innerHTML = `
                        <div class="preview-container">
                            <div class="preview-content">
                                <div id="previewContent"></div>
                            </div>
                        </div>
                    `;
                    
                    // Display the preview
                    displayPreview(data.data);
                } else {
                    container.innerHTML = '<div style="color: red;">Failed to get sample data</div>';
                }
            } catch (error) {
                container.innerHTML = '<div style="color: red;">Error: ' + error.message + '</div>';
            }
        }

        function displayPreview(previewData) {
            const previewContent = document.getElementById('previewContent');
            
            if (!previewContent) return;
            
            // Build preview HTML
            let previewHTML = `
                <div class="design-preview">
                    <div class="design-mockup">
                        <h3>ðŸ“¦ Packaging Design</h3>
                        ${previewData.mockupUrl ? 
                            `<img src="http://localhost:8000${previewData.mockupUrl}" alt="Packaging Design" class="mockup-image" />` :
                            `<div class="mockup-placeholder">
                                <i class="fas fa-box"></i>
                                <p>Design mockup will appear here</p>
                            </div>`
                        }
                    </div>
                    
                    <div class="design-details">
                        <h3>ðŸŽ¯ Design Concepts</h3>
                        <div class="concepts-list">
                            ${previewData.concepts && previewData.concepts.length > 0 ? 
                                previewData.concepts.map(concept => `<div class="concept-item">â€¢ ${concept}</div>`).join('') :
                                '<div class="concept-item">â€¢ No concepts available</div>'
                            }
                        </div>
                        
                        ${previewData.colorPalette && previewData.colorPalette.length > 0 ? `
                            <h4>ðŸŽ¨ Color Palette</h4>
                            <div class="color-palette">
                                ${previewData.colorPalette.map(color => `<div class="color-swatch" style="background-color: ${color}" title="${color}"></div>`).join('')}
                            </div>
                        ` : ''}
                        
                        ${previewData.stylesSuggestions && previewData.stylesSuggestions.length > 0 ? `
                            <h4>âœ¨ Style Suggestions</h4>
                            <div class="styles-list">
                                ${previewData.stylesSuggestions.map(style => `<div class="style-item">â€¢ ${style}</div>`).join('')}
                            </div>
                        ` : ''}
                        
                        ${previewData.designId ? `
                            <div class="design-info">
                                <small>Design ID: ${previewData.designId}</small>
                                ${previewData.aiConfidence ? `<small>AI Confidence: ${(previewData.aiConfidence * 100).toFixed(1)}%</small>` : ''}
                            </div>
                        ` : ''}
                    </div>
                </div>
            `;
            
            previewContent.innerHTML = previewHTML;
        }
    </script>
</body>
</html>
